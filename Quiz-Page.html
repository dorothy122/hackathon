<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href = "style.css">
        <title>Crystal Ball Quiz</title>
    </head>
    <body>
        <h1>Crystal Ball Quiz</h1>
        <h2>Glimpse the Future...</h2>
        <form id = "myForm" >
            <label for="FirstName">First name:</label><br>
            <input type="text" id="FirstName" name="FirstName" required ><br>
            <label for="LastName">Last name:</label><br>
            <input type="text" id="LastName" name="LastName" required><br>
            <label for="Height">Height in cm:</label><br>
            <input type="number" id="Height" name="Height" required ><br>
            <label for="BirthMonth">Birth Month:</label><br>
            <select id="BirthMonth" name="BirthMonth" required>
                <option value="January">January</option>
                <option value="February">February</option>
                <option value="March">March</option>
                <option value="April">April</option>
                <option value="May">May</option>
                <option value="June">June</option>
                <option value="July">July</option>
                <option value="August">August</option>
                <option value="September">September</option>
                <option value="October">October</option>
                <option value="November">November</option>
                <option value="December">December</option>
            </select><br>
            <button type = "submit">Submit</button>
        </form>
        <p id="responseMessage"></p>
        <script>
            const form = document.getElementById('myForm');
            const message = document.getElementById('responseMessage');
            
            form.addEventListener('submit', async (e) => {
                e.preventDefault(); // Prevent form redirect
            
                const formData = new FormData(form);
                const scriptURL = 'https://script.google.com/macros/s/AKfycbwEDyfYWRSfBVQ5Nr3u-tKY3iMR5CSUfYdF0WKGU7uZFGSrr0ziMmSO8e8RcoHY9t76/exec'; // Replace with your deployed Apps Script web app URL
            
                try {
                    const response = await fetch(scriptURL, {
                        method: 'POST',
                        body: formData
                });
            
                const result = await response.json();
                if (result.result === 'success') {
                    window.location.href = 'SubmissionPage.html';
                } else {
                    message.textContent = 'Error: ' + result.message;
                    message.style.color = 'red';
                }
                } catch (error) {
                    message.textContent = 'Submission failed: ' + error.message;
                    message.style.color = 'red';
                }
            });
        </script>
    </body>
</html>